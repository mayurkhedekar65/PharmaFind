{% extends "base.html" %}

{% block content %}
    <h2>Search Results for "{{ query }}"</h2>

    {% if location_error %}
        <p style="color: red;"><strong>Could not detect your location.</strong> Showing results without distance sorting.</p>
    {% else %}
        <p>Showing pharmacies sorted by nearest to your location.</p>
    {% endif %}

    <ul>
        {% for item in results %}
            <li>
                <strong>Medicine:</strong> {{ item.medicine.name }} at {{ item.pharmacy.name }}<br>
                <strong>Address:</strong> {{ item.pharmacy.address }}<br>
                <strong>Price:</strong> â‚¹{{ item.price }}<br>
                {% if item.distance is not None %}
                    <strong>Distance:</strong> {{ item.distance|floatformat:2 }} km away
                {% endif %}
            </li>
        {% empty %}
            <li>No pharmacies found matching your search.</li>
        {% endfor %}
    </ul>
{% endblock %}